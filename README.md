# 在庫管理システム

## プロジェクト概要
このシステムは、PHP・MySQL・HTML/CSS/JavaScriptを使用して開発された、現代的なWebベースの在庫管理システムです。直感的なユーザーインターface、堅牢なセキュリティ機能、レスポンシブデザインを特徴としています。

## 主要機能

### 🔐 認証・セキュリティ機能
- **ユーザー認証システム**: 安全なログイン/ログアウト機能
- **二段階認証（2FA）**: Google Authenticator対応のTOTP認証
- **セッション管理**: セキュアなセッション制御
- **ログ機能**: すべての認証活動を記録
- **パスワードハッシュ化**: bcryptを使用した安全なパスワード保存

### 📦 在庫管理機能
- **商品追加**: 画像アップロード対応の商品登録
- **商品編集**: 既存商品情報の更新
- **商品削除**: 安全な削除機能（確認ダイアログ付き）
- **商品一覧**: カテゴリ別・検索機能付きの商品表示
- **在庫監視**: 低在庫アラート機能

### 📊 ダッシュボード機能
- **統計情報表示**: 総商品数、在庫価値、低在庫商品数、注文数
- **最近の活動**: 新規追加商品、低在庫商品の表示
- **クイックアクション**: 主要機能への素早いアクセス
- **リアルタイム時計**: 動的な時刻表示

### ⚙️ 設定機能
- **プロフィール管理**: ユーザー情報の更新
- **パスワード変更**: 安全なパスワード更新機能
- **システム統計**: ユーザー活動統計の表示

## 技術仕様

### フロントエンド
- **HTML5**: セマンティックなマークアップ
- **CSS3**: モダンなレスポンシブデザイン
  - Flexbox/Grid レイアウト
  - グラデーション・アニメーション効果
  - ガラスモーフィズムデザイン
- **JavaScript**: インタラクティブな機能
  - リアルタイムフォームバリデーション
  - 画像プレビュー機能
  - 動的UI更新

### バックエンド
- **PHP 8.0+**: サーバーサイドロジック
- **MySQL**: データベース管理
- **PDO**: 安全なデータベースアクセス
- **セッション管理**: セキュアな状態管理

### セキュリティ対策
- **SQLインジェクション対策**: プリペアドステートメント使用
- **XSS対策**: 入力値の適切なエスケープ処理
- **CSRF対策**: トークンベース認証
- **ファイルアップロード制限**: 形式・サイズ制限
- **パスワードポリシー**: 強度チェック機能

## システム要件

### 推奨環境
- **Webサーバー**: Apache 2.4+ / Nginx 1.18+
- **PHP**: 8.0以上
- **MySQL**: 8.0以上
- **ブラウザ**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+

### 必要な拡張機能
```bash
php-pdo
php-pdo-mysql
php-gd
php-session
php-json
```

## インストール手順

### 1. ファイルの配置
```bash
# プロジェクトファイルをWebサーバーのドキュメントルートに配置
cp -r inventory-system/* /var/www/html/
```

### 2. データベースセットアップ
```sql
-- データベース作成
CREATE DATABASE beginner_site CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;

-- SQLファイルをインポート
mysql -u root -p beginner_site < beginner_site.sql
```

### 3. 設定ファイル編集
```php
// enhanced_config.php の設定を環境に合わせて変更
$host = 'localhost';
$dbname = 'beginner_site';
$username = 'root';
$password = ''; // 本番環境では適切なパスワードを設定
```

### 4. ディレクトリ権限設定
```bash
# アップロードディレクトリの権限設定
mkdir uploads
chmod 755 uploads
chown www-data:www-data uploads
```

## デモアカウント

### 管理者アカウント
- **ユーザーID**: admin
- **パスワード**: password
- **権限**: 全機能アクセス可能

### 一般ユーザーアカウント
- **ユーザーID**: user
- **パスワード**: password
- **権限**: 基本的な在庫管理機能

## データベース構造

### 主要テーブル
- **users**: ユーザー情報・認証データ
- **products**: 商品情報・在庫データ
- **orders**: 注文情報
- **auth_logs**: 認証ログ

### ER図概要
```
users (1) ──── (N) products
  │
  └─── (N) auth_logs

products (1) ──── (N) order_items
  │
orders (1) ──── (N) order_items
```

## 使用方法

### 基本的な操作フロー
1. ログインページでデモアカウントを使用してログイン
2. ダッシュボードで現在の在庫状況を確認
3. 「商品追加」で新しい商品を登録
4. 「商品一覧」で登録した商品を確認・編集
5. 「設定」でプロフィール情報を更新
6. 「二段階認証設定」でセキュリティを強化

### 商品管理
1. **商品追加**: 名前、カテゴリ、価格、在庫数、画像を入力
2. **商品編集**: 既存商品の情報を更新
3. **在庫監視**: 設定した最小在庫数を下回ると警告表示

## セキュリティ機能詳細

### 二段階認証（2FA）
- Google Authenticatorアプリと連携
- TOTP（Time-based One-Time Password）方式
- QRコード生成による簡単セットアップ
- バックアップコード機能（デモ実装）

### ログ機能
- 全ログイン試行を記録
- IPアドレス・ユーザーエージェント記録
- 成功・失敗状況の追跡

## アピールポイント・頑張った部分

### 🎨 デザイン面
1. **モダンなUI**: ガラスモーフィズムデザインを採用
2. **レスポンシブ対応**: スマートフォン・タブレット・デスクトップ対応
3. **直感的操作**: ユーザビリティを重視したインターface設計
4. **アニメーション効果**: スムーズなトランジション・ホバー効果

### 🔧 技術面
1. **セキュリティ強化**: 多層防御によるセキュリティ対策
2. **エラーハンドリング**: 包括的なエラー処理・ユーザーフレンドリーなメッセージ
3. **画像処理**: 安全なファイルアップロード・リアルタイムプレビュー
4. **データベース設計**: 正規化されたテーブル構造

### 🚀 機能面
1. **リアルタイム機能**: 動的統計更新・ライブ検索
2. **統計ダッシュボード**: 視覚的な在庫状況把握
3. **ファイル管理**: 画像の自動リサイズ・形式チェック
4. **ユーザビリティ**: キーボードショートカット・確認ダイアログ

### 🛡️ セキュリティ面
1. **多要素認証**: 二段階認証による強固なセキュリティ
2. **ログ監査**: 包括的な操作ログ記録
3. **入力検証**: フロントエンド・バックエンド両方でのバリデーション
4. **セッション保護**: セッションハイジャック対策

## AIプロンプト使用履歴

### 主要な使用プロンプト
1. **初期設計**: 「無理せずに高度なコードを使う、コードはなるべく短くわかりやすく作成すること」
2. **エラー修正**: 「two_factor_setup.phpのFatal error: Cannot redeclare base32_encode()エラーの修正」
3. **機能追加**: 「add_product.phpで画像を読み込んでも全体に表示ができない問題の解決」
4. **ナビゲーション修正**: 「enhanced_dashboard.phpからsettings.phpとtwo_factor_setup.phpに移動できない問題」

### AI活用の効果
- 迅速なエラー診断・修正
- コードの品質向上・セキュリティ強化
- ユーザビリティ向上のための提案
- 最新のWeb技術トレンドの反映

## トラブルシューティング

### よくある問題と解決方法

#### データベース接続エラー
```php
// enhanced_config.php の設定確認
$host = 'localhost';  // ホスト名
$dbname = 'beginner_site';  // データベース名
$username = 'root';  // ユーザー名
$password = '';  // パスワード
```

#### 画像アップロードエラー
```php
// アップロードディレクトリの権限確認
chmod 755 uploads/
```

#### セッションエラー
```php
// セッション設定の確認
session_start(); の重複呼び出しを避ける
```

## 今後の拡張予定

### 短期目標（v1.1）
- [ ] エクスポート機能（CSV/Excel）
- [ ] 商品カテゴリ管理機能
- [ ] バックアップ・復元機能
- [ ] メール通知機能

### 中期目標（v1.2）
- [ ] API機能追加